<?xml version="1.0" encoding="UTF-8"?>
<pd:ProcessDefinition xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns="http://www.tibco.com/namespaces/tnt/plugins/file" xmlns:pfx10="http://www.tibco.com/ns/no_namespace_schema_location/BusinessProcesses/Services/BatchUpdateSOBH/BalanceUpdate/Resources/ParseDataSectionBalUpd.xsd" xmlns:pfx="http://www.tibco.com/ns/no_namespace_schema_location/BatchPrepaidUpdate/SOBH.xsd" xmlns:ns2="http://www.tibco.com/pe/EngineTypes" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:ns1="http://www.tibco.com/pe/DeployedVarsType" xmlns:ns4="http://www.tibco.com/schemas/ESI_EMA/BusinessProcesses/Services/BatchUpdateSOBH/BalanceUpdate/Resources/Schema.xsd" xmlns:ns3="http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/baseDocument" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:pfx5="http://www.tibco.com/pe/WriteToLogActivitySchema" xmlns:pfx4="http://www.tibco.com/ns/no_namespace_schema_location/BusinessProcesses/Services/BatchPrepaidUpdate/Resources/cai3gbh.xsd" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:pfx3="http://www.tibco.com/ns/no_namespace_schema_location/BusinessProcesses/Services/BatchPrepaidUpdate/BalanceUpdate/SOBH.xsd" xmlns:pfx2="http://www.tibco.com/ns/no_namespace_schema_location/BusinessProcesses/Services/BatchPrepaidUpdate/SOBH.xsd" xmlns:pfx9="http://www.tibco.com/ns/no_namespace_schema_location/BusinessProcesses/Services/BatchUpdateSOBH/BalanceUpdate/Resources/ParseDateSection.xsd" xmlns:pfx8="http://www.tibco.com/ns/no_namespace_schema_location/BusinessProcesses/Services/BatchUpdateSOBH/BalanceUpdate/Resources/Data.xsd" xmlns:pfx7="http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/baseDocument123" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pfx6="http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/FileAdapter/wire/FileAdapterConfiguration">
    <xsd:import namespace="http://www.tibco.com/ns/no_namespace_schema_location/BusinessProcesses/Services/BatchPrepaidUpdate/BalanceUpdate/SOBH.xsd" schemaLocation="/BusinessProcesses/Services/BatchPrepaidUpdate/Resources/SOBH.xsd"/>
    <xsd:import namespace="http://www.tibco.com/ns/no_namespace_schema_location/BusinessProcesses/Services/BatchPrepaidUpdate/Resources/cai3gbh.xsd" schemaLocation="/BusinessProcesses/Services/BatchPrepaidUpdate/Resources/cai3gbh.xsd"/>
    <xsd:import namespace="http://www.ericsson.com/CDM/telecom/canonicaldatamodel" schemaLocation="/CDM/CDM.xsd"/>
    <xsd:import namespace="http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/baseDocument123" schemaLocation="/BusinessProcesses/Services/BatchUpdateSOBH/BalanceUpdate/Resources/baseDocument.xsd"/>
    <xsd:import namespace="http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/baseDocument" schemaLocation="/AESchemas/ae/baseDocument.aeschema"/>
    <xsd:import namespace="http://www.tibco.com/ns/no_namespace_schema_location/BusinessProcesses/Services/BatchUpdateSOBH/BalanceUpdate/Resources/ParseDataSectionBalUpd.xsd" schemaLocation="/BusinessProcesses/Services/BatchUpdateSOBH/BalanceUpdate/Resources/ParseDataSectionBalUpd.xsd"/>
    <xsd:import namespace="http://www.tibco.com/ns/no_namespace_schema_location/BusinessProcesses/Services/BatchUpdateSOBH/BalanceUpdate/Resources/Data.xsd"/>
    <pd:name>BusinessProcesses/Services/BatchUpdateSOBH/BalanceUpdate/Implementation/BatchPREBalUpdAbsnRelReqFlow_CAI3G.process</pd:name>
    <pd:startName>Adapter Subscriber</pd:startName>
    <pd:startX>0</pd:startX>
    <pd:startY>0</pd:startY>
    <pd:returnBindings>
        <CAI3GBH>
            <config>
                <url>
                    <xsl:value-of select="&quot;http://127.0.0.1:8998&quot;"/>
                </url>
                <ns>
                    <xsl:value-of select="&quot;http://schemas.ericsson.com/cai3g1.2/&quot;"/>
                </ns>
                <user>
                    <xsl:value-of select="&quot;tibcotest&quot;"/>
                </user>
                <passwd>
                    <xsl:value-of select="&quot;#00022330303031727163726D61606772&quot;"/>
                </passwd>
            </config>
            <Request>
                <xsl:copy-of select="$AccmCommand/AccumulatedOutput/CAI3GBH/Request/Command"/>
            </Request>
        </CAI3GBH>
    </pd:returnBindings>
    <pd:starter name="Adapter Subscriber">
        <pd:type>com.tibco.plugin.ae.AESubscriberActivity</pd:type>
        <pd:resourceType>ae.aepalette.aeSubscription</pd:resourceType>
        <pd:x>55</pd:x>
        <pd:y>166</pd:y>
        <config>
            <ae.aepalette.sharedProperties.transportChoice>jmsQueue</ae.aepalette.sharedProperties.transportChoice>
            <ae.aepalette.sharedProperties.useRequestReply>false</ae.aepalette.sharedProperties.useRequestReply>
            <ae.aepalette.sharedProperties.adapterService>/BusinessProcesses/Services/BatchUpdateSOBH/BalanceUpdate/AdapterServices/BalanceUpdateReqPub/FileAdapterConfiguration.adfiles#adapterService.PublicationService</ae.aepalette.sharedProperties.adapterService>
            <tpPluginEndpointName>PublicationServiceEndPoint</tpPluginEndpointName>
            <ae.aepalette.sharedProperties.transportType>jmsQueue</ae.aepalette.sharedProperties.transportType>
            <ae.aepalette.sharedProperties.jmsTopicSessionTopic>%%Domain%%.%%Deployment%%.FileAdapter.FileAdapterConfiguration.PublicationService</ae.aepalette.sharedProperties.jmsTopicSessionTopic>
            <ae.aepalette.sharedProperties.jmsTopicSessionConnectionFactory>TopicConnectionFactory</ae.aepalette.sharedProperties.jmsTopicSessionConnectionFactory>
            <ae.aepalette.sharedProperties.jmsSessionUsername>%%CommonResources/Connections/JMS/Internal/EAI_EMSConnection/JNDIUserName%%</ae.aepalette.sharedProperties.jmsSessionUsername>
            <ae.aepalette.sharedProperties.jmsSessionProviderURL>%%CommonResources/Connections/JMS/Internal/EAI_EMSConnection/JNDIUrl%%</ae.aepalette.sharedProperties.jmsSessionProviderURL>
            <ae.aepalette.sharedProperties.jmsQueueSessionConnectionFactory>%%CommonResources/Connections/JMS/Internal/EAI_EMSConnection/QueueConnectionFactory%%</ae.aepalette.sharedProperties.jmsQueueSessionConnectionFactory>
            <ae.aepalette.sharedProperties.autoGenClientID>true</ae.aepalette.sharedProperties.autoGenClientID>
            <ae.aepalette.sharedProperties.jmsQueueSessionQueue>%%Domain%%.%%Deployment%%.FileAdapter.FileAdapterConfiguration.PublicationService</ae.aepalette.sharedProperties.jmsQueueSessionQueue>
            <ae.aepalette.sharedProperties.isAutoConfirm>true</ae.aepalette.sharedProperties.isAutoConfirm>
            <ae.aepalette.sharedProperties.useCustomOutput>true</ae.aepalette.sharedProperties.useCustomOutput>
            <ae.aepalette.sharedProperties.customOutputMeta>/AESchemas/ae/baseDocument.aeschema#class.MBusinessDocument</ae.aepalette.sharedProperties.customOutputMeta>
            <ae.aepalette.sharedProperties.outputMeta>
                <aeMeta>/AESchemas/ae/FileAdapter/wire/FileAdapterConfiguration.aeschema#class.DelimitedFileRecord</aeMeta>
            </ae.aepalette.sharedProperties.outputMeta>
            <_sequenceKey>"Sequnce"</_sequenceKey>
            <ae.aepalette.sharedProperties.jmsSessionPassword>%%CommonResources/Connections/JMS/Internal/EAI_EMSConnection/Password%%</ae.aepalette.sharedProperties.jmsSessionPassword>
        </config>
        <pd:inputBindings/>
    </pd:starter>
    <pd:endName>End</pd:endName>
    <pd:endX>1145</pd:endX>
    <pd:endY>131</pd:endY>
    <pd:errorSchemas/>
    <pd:processVariables>
        <OutputFileName>
            <xsd:element name="root">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="FileToTransferToEMA" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </OutputFileName>
    </pd:processVariables>
    <pd:targetNamespace>http://xmlns.example.com/1468571872036</pd:targetNamespace>
    <pd:activity name="Write File">
        <pd:type>com.tibco.plugin.file.FileWriteActivity</pd:type>
        <pd:resourceType>ae.activities.FileWriteActivity</pd:resourceType>
        <pd:x>741</pd:x>
        <pd:y>256</pd:y>
        <config>
            <encoding>text</encoding>
            <compressFile>None</compressFile>
            <append>true</append>
            <createMissingDirectories>true</createMissingDirectories>
        </config>
        <pd:inputBindings>
            <ns:WriteActivityInputTextClass>
                <fileName>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/BalanceUpdate/CIA3GRequestFile"/>
                </fileName>
                <textContent>
                    <xsl:value-of select="tib:concat-sequence-format($CAIText/AccumulatedOutput/root,&quot;&#xA;&quot;)"/>
                </textContent>
            </ns:WriteActivityInputTextClass>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Log">
        <pd:type>com.tibco.pe.core.WriteToLogActivity</pd:type>
        <pd:resourceType>ae.activities.log</pd:resourceType>
        <pd:x>873</pd:x>
        <pd:y>339</pd:y>
        <config>
            <role>User</role>
        </config>
        <pd:inputBindings>
            <pfx5:ActivityInput>
                <message>
                    <xsl:value-of select="$_error/ns2:ErrorReport/Msg"/>
                </message>
                <xsl:if test="$_error/ns2:ErrorReport/MsgCode">
                    <msgCode>
                        <xsl:value-of select="$_error/ns2:ErrorReport/MsgCode"/>
                    </msgCode>
                </xsl:if>
            </pfx5:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="PrepareCAICommand-1">
        <pd:type>com.tibco.plugin.file.FileWriteActivity</pd:type>
        <pd:resourceType>ae.activities.FileWriteActivity</pd:resourceType>
        <pd:x>184</pd:x>
        <pd:y>35</pd:y>
        <config>
            <encoding>text</encoding>
            <compressFile>None</compressFile>
            <append>true</append>
        </config>
        <pd:inputBindings>
            <ns:WriteActivityInputTextClass>
                <fileName>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/BalanceUpdate/CIA3GRequestFile&#xA;{--tib:format-dateTime('yyyyMMddHHmmss',current-dateTime()),&quot;.txt&quot;)--}"/>
                </fileName>
                <textContent>
                    <xsl:value-of select="&quot;&#xA;&#x9;&lt;/Request>&#xA;&lt;/CAI3GBH>&quot;"/>
                </textContent>
            </ns:WriteActivityInputTextClass>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Parse XML">
        <pd:type>com.tibco.plugin.xml.XMLParseActivity</pd:type>
        <pd:resourceType>ae.activities.XMLParseActivity</pd:resourceType>
        <pd:x>175</pd:x>
        <pd:y>259</pd:y>
        <config>
            <inputStyle>text</inputStyle>
            <xsdVersion>default</xsdVersion>
            <validateOutput>false</validateOutput>
            <term ref="pfx10:DataSection"/>
        </config>
        <pd:coercions>
            <pd:coercion xpath="$Adapter-Subscriber/ProcessStarterOutput/body/ns3:MBusinessDocument/DataSection/item/Data" type="ns4:"/>
        </pd:coercions>
        <pd:inputBindings>
            <xmlString>
                <xsl:value-of select="tib:render-xml($Adapter-Subscriber/ProcessStarterOutput/body/ns3:MBusinessDocument/DataSection)"/>
            </xmlString>
        </pd:inputBindings>
    </pd:activity>
    <pd:group name="Group">
        <pd:type>com.tibco.pe.core.CriticalSectionGroup</pd:type>
        <pd:resourceType>ae.process.group</pd:resourceType>
        <pd:x>333</pd:x>
        <pd:y>56</pd:y>
        <pd:width>466</pd:width>
        <pd:height>140</pd:height>
        <pd:collapsedWidth>57</pd:collapsedWidth>
        <pd:collapsedHeight>70</pd:collapsedHeight>
        <pd:groupVariables/>
        <pd:joinToggle>inherit</pd:joinToggle>
        <config>
            <pd:groupType>criticalSection</pd:groupType>
            <pd:serializable>false</pd:serializable>
            <pd:scope>single</pd:scope>
        </config>
        <pd:inputBindings/>
        <pd:expanded>true</pd:expanded>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>AssignFileName</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Remove File</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Copy File</pd:from>
            <pd:to>Remove File</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>AssignFileName</pd:from>
            <pd:to>Copy File</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:activity name="Copy File">
            <pd:type>com.tibco.plugin.file.FileCopyActivity</pd:type>
            <pd:resourceType>ae.activities.FileCopyActivity</pd:resourceType>
            <pd:x>535</pd:x>
            <pd:y>134</pd:y>
            <config>
                <overwrite>true</overwrite>
            </config>
            <pd:inputBindings>
                <ns:CopyActivityConfig>
                    <fromFileName>
                        <xsl:value-of select="$PrepareCAICommand-1/ns:WriteActivityOutputClass/fileInfo/fullName"/>
                    </fromFileName>
                    <toFileName>
                        <xsl:value-of select="$OutputFileName/root/FileToTransferToEMA"/>
                    </toFileName>
                </ns:CopyActivityConfig>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Remove File">
            <pd:type>com.tibco.plugin.file.FileRemoveActivity</pd:type>
            <pd:resourceType>ae.activities.FileRemoveActivity</pd:resourceType>
            <pd:x>668</pd:x>
            <pd:y>132</pd:y>
            <config/>
            <pd:inputBindings>
                <ns:RemoveActivityInputClass>
                    <fileName>
                        <xsl:value-of select="$PrepareCAICommand-1/ns:WriteActivityOutputClass/fileInfo/fullName"/>
                    </fileName>
                </ns:RemoveActivityInputClass>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="AssignFileName">
            <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
            <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
            <pd:x>424</pd:x>
            <pd:y>134</pd:y>
            <config>
                <variableName>OutputFileName</variableName>
            </config>
            <pd:inputBindings>
                <root>
                    <FileToTransferToEMA>
                        <xsl:value-of select="concat($PrepareCAICommand-1/ns:WriteActivityOutputClass/fileInfo/fullName,tib:format-dateTime('yyyyMMddHHmmss',current-dateTime()),&quot;.txt&quot;)"/>
                    </FileToTransferToEMA>
                </root>
            </pd:inputBindings>
        </pd:activity>
    </pd:group>
    <pd:group name="Group (1)">
        <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
        <pd:resourceType>ae.process.group</pd:resourceType>
        <pd:x>250</pd:x>
        <pd:y>183</pd:y>
        <pd:width>203</pd:width>
        <pd:height>139</pd:height>
        <pd:collapsedWidth>57</pd:collapsedWidth>
        <pd:collapsedHeight>70</pd:collapsedHeight>
        <pd:groupVariables/>
        <pd:joinToggle>inherit</pd:joinToggle>
        <config>
            <pd:groupType>inputLoop</pd:groupType>
            <pd:serializable>false</pd:serializable>
            <pd:over>$Parse-XML/DataSection/item</pd:over>
            <pd:iterationElementSlot>Data</pd:iterationElementSlot>
            <pd:indexSlot>j</pd:indexSlot>
            <pd:outSlot>CAIText</pd:outSlot>
            <pd:activityOutputName>Map Data</pd:activityOutputName>
            <pd:accumulateOutput>true</pd:accumulateOutput>
        </config>
        <pd:inputBindings/>
        <pd:expanded>true</pd:expanded>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>Map Data</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Map Data</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:activity name="Map Data">
            <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
            <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
            <pd:x>350</pd:x>
            <pd:y>261</pd:y>
            <config>
                <element>
                    <xsd:element name="root">
                        <xsd:complexType>
                            <xsd:sequence>
                                <xsd:element name="CAIText" type="xsd:string"/>
                            </xsd:sequence>
                        </xsd:complexType>
                    </xsd:element>
                </element>
            </config>
            <pd:inputBindings>
                <xsl:choose>
                    <xsl:when test="tib:trim($Data/item/Data[1]/RECORDNO)=&quot;RECORDNO&quot;">
                        <root>
                            <CAIText>
                                <xsl:value-of select="concat('&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?>&#xA;&lt;CAI3GBH>&#xA;&#x9;&lt;config>&#xA;&#x9;&#x9;&lt;url>',$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/IP,'&lt;/url>&#xA;&#x9;&#x9;&lt;ns>',$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/ns,'&lt;/ns>&#xA;&#x9;&#x9;&lt;user>',$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/UserName,'&lt;/user>&#xA;&#x9;&#x9;&lt;passwd>',$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/Password,'&lt;/passwd>&#xA;&#x9;        &lt;session>',$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/session,'&lt;/session>&#xA;        &lt;/config>&#xA;&#x9;&lt;Request>&#xA;&#x9;&#x9;')"/>
                            </CAIText>
                        </root>
                    </xsl:when>
                    <xsl:otherwise>
                        <root>
                            <xsl:choose>
                                <xsl:when test="string-length(tib:trim($Data/item/Data[1]/ACCOUNT__ID)) > 0">
                                    <xsl:choose>
                                        <xsl:when test="tib:trim( $Data/item/Data[1]/ADJUSTMENTTYPE)=&quot;A&quot;">
                                            <CAIText>
                                                <xsl:value-of select="concat('&lt;Command>&#xA;&#x9;&#x9;&#x9;&lt;Operation>Set&lt;/Operation>&#xA;&#x9;&#x9;&#x9;&lt;Parameters> &lt;Param name=&quot;MOType&quot;>',$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/MOType,'&lt;/Param>&#xA;        &lt;Param name=&quot;MOId&quot;>&lt;![CDATA[&lt;actionid>SERI CSAIR SUB DAABAMOUNT&lt;/actionid>]]>&lt;/Param>&#xA;        &lt;Param name=&quot;MOAttributes&quot;>','&lt;![CDATA[&lt;setSubscription actionid=&quot;SERI CSAIR SUB DAABAMOUNT&quot; xmlns=&quot;http://schemas.ericsson.com/ema/UserProvisioning/CSSV2/&quot;>&#xA;&lt;msisdn>',$Data/item/Data[1]/SUBNO,'&lt;/msisdn>&#xA;&lt;actionid>SERI CSAIR SUB DAABAMOUNT&lt;/actionid> &#xA;&lt;prepost_paid>PREP&lt;/prepost_paid>&#xA;&lt;davalue>',$Data/item/Data[1]/AMOUNT,'&lt;/davalue>&#xA;&lt;daid>',$Data/item/Data[1]/ACCOUNT__ID,'&lt;/daid>&#xA;&lt;orderNumber>',$Data/item/Data[1]/RECORDNO,'&lt;/orderNumber>&#xA;&lt;subscriberNumberNAI>1&lt;/subscriberNumberNAI>&#xA;&lt;/setSubscription>&#xA;]]> &#xA;&lt;/Param>&#xA;&lt;/Parameters>&#xA;&lt;/Command>'&#xA;)"/>
                                            </CAIText>
                                        </xsl:when>
                                        <xsl:otherwise>
                                            <CAIText>
                                                <xsl:value-of select="concat('&lt;Command>&#xA;&#x9;&#x9;&#x9;&lt;Operation>Set&lt;/Operation>&#xA;&#x9;&#x9;&#x9;&lt;Parameters>&lt;Param name=&quot;MOType&quot;>',$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/MOType,'&lt;/Param>&#xA;        &lt;Param name=&quot;MOId&quot;>&lt;![CDATA[&lt;actionid>SERI CSAIR SUB DARELAMOUNT&lt;/actionid>]]>&lt;/Param>&#xA;        &lt;Param name=&quot;MOAttributes&quot;>','&lt;![CDATA[&lt;setSubscription actionid=&quot;SERI CSAIR SUB DARELAMOUNT&quot; xmlns=&quot;http://schemas.ericsson.com/ema/UserProvisioning/CSSV2/&quot;>&#xA;&lt;msisdn>',$Data/item/Data[1]/SUBNO,'&lt;/msisdn>&#xA;&lt;actionid>SERI CSAIR SUB DARELAMOUNT&lt;/actionid> &#xA;&lt;prepost_paid>PREP&lt;/prepost_paid>&#xA;&lt;davalue>',$Data/item/Data[1]/AMOUNT,'&lt;/davalue>&#xA;&lt;daid>',$Data/item/Data[1]/ACCOUNT__ID,'&lt;/daid>&#xA;&lt;orderNumber>',$Data/item/Data[1]/RECORDNO,'&lt;/orderNumber>&#xA;&lt;subscriberNumberNAI>1&lt;/subscriberNumberNAI>&#xA;&lt;/setSubscription>&#xA;]]> &#xA;&lt;/Param>&#xA;&lt;/Parameters>&#xA;&lt;/Command>'&#xA;)"/>
                                            </CAIText>
                                        </xsl:otherwise>
                                    </xsl:choose>
                                </xsl:when>
                                <xsl:otherwise>
                                    <xsl:choose>
                                        <xsl:when test="tib:trim($Data/item/Data[1]/ADJUSTMENTTYPE)=&quot;A&quot;">
                                            <CAIText>
                                                <xsl:value-of select="concat('&lt;Command>&#xA;&#x9;&#x9;&#x9;&lt;Operation>Set&lt;/Operation>&#xA;&#x9;&#x9;&#x9;&lt;Parameters>&lt;Param name=&quot;MOType&quot;>',$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/MOType,'&lt;/Param>&#xA;        &lt;Param name=&quot;MOId&quot;>&lt;![CDATA[&lt;actionid>SERI CSAIR SUB MAABAMOUNT&lt;/actionid>]]>&lt;/Param>&#xA;        &lt;Param name=&quot;MOAttributes&quot;>','&lt;![CDATA[ &#xA;&lt;setSubscription actionid=&quot;SERI CSAIR SUB MAABAMOUNT&quot; xmlns=&quot;http://schemas.ericsson.com/ema/UserProvisioning/CSSV2/&quot;> &#xA;&lt;msisdn>',$Data/item/Data[1]/SUBNO,'&lt;/msisdn> &#xA;&lt;actionid>SERI CSAIR SUB MAABAMOUNT&lt;/actionid>&#xA;&lt;srvName>CMSTRSF&lt;/srvName>&#xA;&lt;amount>',$Data/item/Data[1]/AMOUNT,'&lt;/amount>&#xA;&lt;prepost_paid>PREP&lt;/prepost_paid> &#xA;&lt;orderNumber>',$Data/item/Data[1]/RECORDNO,'&lt;/orderNumber>&#xA;&lt;subscriberNumberNAI>1&lt;/subscriberNumberNAI> &#xA;&lt;/setSubscription>&#xA;]]> &#xA;&lt;/Param>&#xA;&lt;/Parameters>&#xA;&lt;/Command>'&#xA;)"/>
                                            </CAIText>
                                        </xsl:when>
                                        <xsl:otherwise>
                                            <CAIText>
                                                <xsl:value-of select="concat('&lt;Command>&#xA;&#x9;&#x9;&#x9;&lt;Operation>Set&lt;/Operation>&#xA;&#x9;&#x9;&#x9;&lt;Parameters>&lt;Param name=&quot;MOType&quot;>',$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/MOType,'&lt;/Param>&#xA;        &lt;Param name=&quot;MOId&quot;>&lt;![CDATA[&lt;actionid>SERI CSAIR SUB MARELAMOUNT&lt;/actionid>]]>&lt;/Param>&#xA;        &lt;Param name=&quot;MOAttributes&quot;>','&lt;![CDATA[',&#xA;'&lt;setSubscription actionid=&quot;SERI CSAIR SUB MARELAMOUNT&quot; xmlns=&quot;http://schemas.ericsson.com/ema/UserProvisioning/CSSV2/&quot;>',&#xA;'&lt;srvName>CMSTRSF&lt;/srvName>',&#xA;'&lt;msisdn>',$Data/item/Data[1]/SUBNO,'&lt;/msisdn>',&#xA;'&lt;actionid>SERI CSAIR SUB MARELAMOUNT&lt;/actionid>', &#xA;'&lt;relativeBalance>',$Data/item/Data[1]/AMOUNT,'&lt;/relativeBalance>',&#xA;'&lt;prepost_paid>PREP&lt;/prepost_paid>',&#xA;'&lt;orderNumber>',$Data/item/Data[1]/RECORDNO,'&lt;/orderNumber>',&#xA;'&lt;subscriberNumberNAI>1&lt;/subscriberNumberNAI>',&#xA;'&lt;/setSubscription>',&#xA;']]> &lt;/Param>&#xA;&lt;/Parameters>&#xA;&lt;/Command>'&#xA;)"/>
                                            </CAIText>
                                        </xsl:otherwise>
                                    </xsl:choose>
                                </xsl:otherwise>
                            </xsl:choose>
                        </root>
                    </xsl:otherwise>
                </xsl:choose>
            </pd:inputBindings>
        </pd:activity>
    </pd:group>
    <pd:activity name="SFTP">
        <pd:type>com.tibco.plugin.java.JavaActivity</pd:type>
        <pd:resourceType>ae.javapalette.javaActivity</pd:resourceType>
        <pd:x>993</pd:x>
        <pd:y>129</pd:y>
        <config>
            <fullsource>package BusinessProcesses.Services.BatchUpdateSOBH.BalanceUpdate.Implementation.BatchPREBalUpdAbsnRelReqFlow_CAI3G;
import java.util.*;
import java.io.*;
import java.io.File;
import java.io.FileInputStream;

import com.jcraft.jsch.Channel;
import com.jcraft.jsch.ChannelSftp;
import com.jcraft.jsch.JSch;
import com.jcraft.jsch.Session;
public class BatchPREBalUpdAbsnRelReqFlow_CAI3GSFTP{
/****** START SET/GET METHOD, DO NOT MODIFY *****/
	protected String SFTPHOSTIn = "";
	protected String SFTPUSERIn = "";
	protected String SFTPWORKINGDIRIn = "";
	protected String fileNameIn = "";
	protected int SFTPPORTIn = 0;
	public String getSFTPHOSTIn() {
		return SFTPHOSTIn;
	}
	public void setSFTPHOSTIn(String val) {
		SFTPHOSTIn = val;
	}
	public String getSFTPUSERIn() {
		return SFTPUSERIn;
	}
	public void setSFTPUSERIn(String val) {
		SFTPUSERIn = val;
	}
	public String getSFTPWORKINGDIRIn() {
		return SFTPWORKINGDIRIn;
	}
	public void setSFTPWORKINGDIRIn(String val) {
		SFTPWORKINGDIRIn = val;
	}
	public String getfileNameIn() {
		return fileNameIn;
	}
	public void setfileNameIn(String val) {
		fileNameIn = val;
	}
	public int getSFTPPORTIn() {
		return SFTPPORTIn;
	}
	public void setSFTPPORTIn(int val) {
		SFTPPORTIn = val;
	}
/****** END SET/GET METHOD, DO NOT MODIFY *****/
	public BatchPREBalUpdAbsnRelReqFlow_CAI3GSFTP() {
	}
	public void invoke() throws Exception {
/* Available Variables: DO NOT MODIFY
	In  : String SFTPHOSTIn
	In  : String SFTPUSERIn
	In  : String SFTPWORKINGDIRIn
	In  : String fileNameIn
	In  : int SFTPPORTIn
* Available Variables: DO NOT MODIFY *****/
/**
 * TODO This class is to transfer the file from Local machine to EMA Server On SFTP
 *
 * @author ejmnoqb.
 *         Created Jul 26, 2016.
 */




	@SuppressWarnings("javadoc")
        String SFTPHOST = SFTPHOSTIn;
        int SFTPPORT = SFTPPORTIn;
        String SFTPUSER = SFTPUSERIn;
      String var1 =com.tibco.pe.plugin.PluginProperties.getProperty("tibco.clientVar.CommonResources/Connections/SFTP/External/EMA/PASSWORD");
        String SFTPPASS = var1;
        String SFTPWORKINGDIR = SFTPWORKINGDIRIn ;// "/var/sog/BatchHandler/Users/testbatch/BatchJob";
        String fileName= fileNameIn;

        Session session = null;
        Channel channel = null;
        ChannelSftp channelSftp = null;
        System.out.println("preparing the host information for sftp.");
        try {
            JSch jsch = new JSch();
            session = jsch.getSession(SFTPUSER, SFTPHOST, SFTPPORT);
            session.setPassword(SFTPPASS);
            java.util.Properties config = new java.util.Properties();
            config.put("StrictHostKeyChecking", "no");
            session.setConfig(config);
            session.connect();
            System.out.println("Host connected.");
            channel = session.openChannel("sftp");
            channel.connect();
            System.out.println("sftp channel opened and connected.");
            channelSftp = (ChannelSftp) channel;
            System.out.println("1.");

            channelSftp.cd(SFTPWORKINGDIR);
            System.out.println("2.");
            File f = new File(fileName);
            System.out.println("3." + fileName);
            channelSftp.put(new FileInputStream(f), f.getName());
            System.out.println("4.");
            //log.info("File transfered successfully to host.");
        } catch (Exception ex) {
             System.out.println("Exception found while tranfer the response.");
        }
        finally{

            channelSftp.exit();
            System.out.println("sftp Channel exited.");
            channel.disconnect();
            System.out.println("Channel disconnected.");
            session.disconnect();
            System.out.println("Host Session disconnected.");
        }
    }  
}
</fullsource>
            <fileName>BatchPREBalUpdAbsnRelReqFlow_CAI3GSFTP</fileName>
            <packageName>BusinessProcesses.Services.BatchUpdateSOBH.BalanceUpdate.Implementation.BatchPREBalUpdAbsnRelReqFlow_CAI3G</packageName>
            <javaArchive/>
            <inputData>
                <row>
                    <fieldName>SFTPHOSTIn</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>SFTPUSERIn</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>SFTPWORKINGDIRIn</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>fileNameIn</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>SFTPPORTIn</fieldName>
                    <fieldType>int</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
            </inputData>
            <byteCode>
                <class>
                    <name>BatchPREBalUpdAbsnRelReqFlow_CAI3GSFTP</name>
                    <byteCode>yv66vgAAADMAsQkANQBcCQA1AF0JADUAXgkANQBfCQA1AGAKADYAYQgAYggAYwoAZABlCQBmAGcIAGgKAGkAagcAawoADQBhCgANAGwKAG0AbgcAbwoAEQBhCABwCABxCgARAHIKAG0AcwoAbQB0CAB1CAB2CgBtAHcKAHgAdAgAeQcAeggAewoAHQB8CAB9BwB+CgAhAH8HAIAKACMAYQgAgQoAIwCCCgAjAIMHAIQKACgAhQoAIQCGCgAdAIcIAIgKAB0AiQgAigoAeACLCACMCgBtAIsIAI0HAI4IAI8HAJAHAJEBAApTRlRQSE9TVEluAQASTGphdmEvbGFuZy9TdHJpbmc7AQAKU0ZUUFVTRVJJbgEAEFNGVFBXT1JLSU5HRElSSW4BAApmaWxlTmFtZUluAQAKU0ZUUFBPUlRJbgEAAUkBAA1nZXRTRlRQSE9TVEluAQAUKClMamF2YS9sYW5nL1N0cmluZzsBAARDb2RlAQAPTGluZU51bWJlclRhYmxlAQANc2V0U0ZUUEhPU1RJbgEAFShMamF2YS9sYW5nL1N0cmluZzspVgEADWdldFNGVFBVU0VSSW4BAA1zZXRTRlRQVVNFUkluAQATZ2V0U0ZUUFdPUktJTkdESVJJbgEAE3NldFNGVFBXT1JLSU5HRElSSW4BAA1nZXRmaWxlTmFtZUluAQANc2V0ZmlsZU5hbWVJbgEADWdldFNGVFBQT1JUSW4BAAMoKUkBAA1zZXRTRlRQUE9SVEluAQAEKEkpVgEABjxpbml0PgEAAygpVgEABmludm9rZQEADVN0YWNrTWFwVGFibGUHAJAHAJIHAJMHAJQHAHoHAI4HAJUBAApFeGNlcHRpb25zAQAKU291cmNlRmlsZQEAK0JhdGNoUFJFQmFsVXBkQWJzblJlbFJlcUZsb3dfQ0FJM0dTRlRQLmphdmEMADcAOAwAOQA4DAA6ADgMADsAOAwAPAA9DABOAE8BAAABAEZ0aWJjby5jbGllbnRWYXIuQ29tbW9uUmVzb3VyY2VzL0Nvbm5lY3Rpb25zL1NGVFAvRXh0ZXJuYWwvRU1BL1BBU1NXT1JEBwCWDACXAJgHAJkMAJoAmwEAKHByZXBhcmluZyB0aGUgaG9zdCBpbmZvcm1hdGlvbiBmb3Igc2Z0cC4HAJwMAJ0AQwEAFGNvbS9qY3JhZnQvanNjaC9KU2NoDACeAJ8HAJMMAKAAQwEAFGphdmEvdXRpbC9Qcm9wZXJ0aWVzAQAVU3RyaWN0SG9zdEtleUNoZWNraW5nAQACbm8MAKEAogwAowCkDAClAE8BAA9Ib3N0IGNvbm5lY3RlZC4BAARzZnRwDACmAKcHAJQBACJzZnRwIGNoYW5uZWwgb3BlbmVkIGFuZCBjb25uZWN0ZWQuAQAbY29tL2pjcmFmdC9qc2NoL0NoYW5uZWxTZnRwAQACMS4MAKgAQwEAAjIuAQAMamF2YS9pby9GaWxlDABOAEMBABdqYXZhL2xhbmcvU3RyaW5nQnVpbGRlcgEAAjMuDACpAKoMAKsAPwEAF2phdmEvaW8vRmlsZUlucHV0U3RyZWFtDABOAKwMAK0APwwAoQCuAQACNC4MAK8ATwEAFHNmdHAgQ2hhbm5lbCBleGl0ZWQuDACwAE8BABVDaGFubmVsIGRpc2Nvbm5lY3RlZC4BABpIb3N0IFNlc3Npb24gZGlzY29ubmVjdGVkLgEAE2phdmEvbGFuZy9FeGNlcHRpb24BACtFeGNlcHRpb24gZm91bmQgd2hpbGUgdHJhbmZlciB0aGUgcmVzcG9uc2UuAQCRQnVzaW5lc3NQcm9jZXNzZXMvU2VydmljZXMvQmF0Y2hVcGRhdGVTT0JIL0JhbGFuY2VVcGRhdGUvSW1wbGVtZW50YXRpb24vQmF0Y2hQUkVCYWxVcGRBYnNuUmVsUmVxRmxvd19DQUkzRy9CYXRjaFBSRUJhbFVwZEFic25SZWxSZXFGbG93X0NBSTNHU0ZUUAEAEGphdmEvbGFuZy9PYmplY3QBABBqYXZhL2xhbmcvU3RyaW5nAQAXY29tL2pjcmFmdC9qc2NoL1Nlc3Npb24BABdjb20vamNyYWZ0L2pzY2gvQ2hhbm5lbAEAE2phdmEvbGFuZy9UaHJvd2FibGUBACRjb20vdGliY28vcGUvcGx1Z2luL1BsdWdpblByb3BlcnRpZXMBAAtnZXRQcm9wZXJ0eQEAJihMamF2YS9sYW5nL1N0cmluZzspTGphdmEvbGFuZy9TdHJpbmc7AQAQamF2YS9sYW5nL1N5c3RlbQEAA291dAEAFUxqYXZhL2lvL1ByaW50U3RyZWFtOwEAE2phdmEvaW8vUHJpbnRTdHJlYW0BAAdwcmlu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</byteCode>
                </class>
            </byteCode>
        </config>
        <pd:inputBindings>
            <javaCodeActivityInput>
                <SFTPHOSTIn>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/CommonResources/Connections/SFTP/External/EMA/HOST"/>
                </SFTPHOSTIn>
                <SFTPUSERIn>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/CommonResources/Connections/SFTP/External/EMA/USERNAME"/>
                </SFTPUSERIn>
                <SFTPWORKINGDIRIn>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BusinessProcesses/Services/BatchAdjustments/SFTPWorkingDirectory"/>
                </SFTPWORKINGDIRIn>
                <fileNameIn>
                    <xsl:value-of select="$OutputFileName/root/FileToTransferToEMA"/>
                </fileNameIn>
                <SFTPPORTIn>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/CommonResources/Connections/SFTP/External/EMA/PORT"/>
                </SFTPPORTIn>
            </javaCodeActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Catch">
        <pd:type>com.tibco.pe.core.CatchActivity</pd:type>
        <pd:resourceType>ae.activities.catch</pd:resourceType>
        <pd:x>671</pd:x>
        <pd:y>396</pd:y>
        <pd:handler>true</pd:handler>
        <config>
            <catchAll>true</catchAll>
        </config>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="LogCaught">
        <pd:type>com.tibco.pe.core.WriteToLogActivity</pd:type>
        <pd:resourceType>ae.activities.log</pd:resourceType>
        <pd:x>807</pd:x>
        <pd:y>396</pd:y>
        <config>
            <role>User</role>
        </config>
        <pd:inputBindings>
            <pfx5:ActivityInput>
                <message>
                    <xsl:value-of select="tib:render-xml($Catch)"/>
                </message>
                <xsl:if test="$_error/ns2:ErrorReport/MsgCode">
                    <msgCode>
                        <xsl:value-of select="$_error/ns2:ErrorReport/MsgCode"/>
                    </msgCode>
                </xsl:if>
            </pfx5:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:transition>
        <pd:from>Write File</pd:from>
        <pd:to>Log</pd:to>
        <pd:lineType>Straight</pd:lineType>
        <pd:lineColor>-52429</pd:lineColor>
        <pd:conditionType>error</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Log</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>One Bend</pd:lineType>
        <pd:lineColor>-13382656</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Write File</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>One Bend</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Adapter Subscriber</pd:from>
        <pd:to>Parse XML</pd:to>
        <pd:xpathDescription>DataExists</pd:xpathDescription>
        <pd:lineType>Multiple Bends</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>string-length($Adapter-Subscriber/ProcessStarterOutput/body/ns3:MBusinessDocument/DataSection)&gt;0</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>PrepareCAICommand-1</pd:from>
        <pd:to>Log</pd:to>
        <pd:lineType>One Bend</pd:lineType>
        <pd:lineColor>-52480</pd:lineColor>
        <pd:conditionType>error</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Adapter Subscriber</pd:from>
        <pd:to>PrepareCAICommand-1</pd:to>
        <pd:lineType>Multiple Bends</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>PrepareCAICommand-1</pd:from>
        <pd:to>Group</pd:to>
        <pd:lineType>Multiple Bends</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group</pd:from>
        <pd:to>SFTP</pd:to>
        <pd:lineType>One Bend</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group</pd:from>
        <pd:to>Log</pd:to>
        <pd:lineType>One Bend</pd:lineType>
        <pd:lineColor>-52429</pd:lineColor>
        <pd:conditionType>error</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group (1)</pd:from>
        <pd:to>Write File</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group (1)</pd:from>
        <pd:to>Log</pd:to>
        <pd:lineType>Straight</pd:lineType>
        <pd:lineColor>-52429</pd:lineColor>
        <pd:conditionType>error</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Parse XML</pd:from>
        <pd:to>Group (1)</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>SFTP</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Catch</pd:from>
        <pd:to>LogCaught</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-52429</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>LogCaught</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>One Bend</pd:lineType>
        <pd:lineColor>-52480</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
</pd:ProcessDefinition>